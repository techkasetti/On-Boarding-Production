<template>
    <div class="modal-backdrop slds-backdrop slds-backdrop_open"></div>

    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">

            <!-- Header -->
            <header class="slds-modal__header">
                <h2 class="slds-modal__title slds-hyphenate">
                    Confirm Your Details
                </h2>
            </header>

            <!-- Body -->
            <div class="slds-modal__content slds-p-around_medium">

                <!-- Loading Spinner -->
                <template if:true={loading}>
                    <div class="slds-align_absolute-center" style="height: 15rem;">
                        <lightning-spinner
                            alternative-text="Loading..."
                            variant="brand"
                            size="large">
                        </lightning-spinner>
                    </div>
                </template>

                <!-- Error Message -->
                <template if:true={error}>
                    <div
                        class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error"
                        role="alert">
                        <span class="slds-assistive-text">Error</span>
                        <h2>{error}</h2>
                    </div>
                </template>

                <!-- Main Form -->
                <template if:false={loading}>
                    <template if:false={error}>

                        <p class="slds-m-bottom_small">
                            Please review the information we extracted from your resume.
                            You can make corrections if needed.
                        </p>

                        <lightning-input
                            label="First Name"
                            value={previewFirstName}
                            onchange={handlePreviewFirstNameChange}
                            class="slds-m-bottom_x-small">
                        </lightning-input>

                        <lightning-input
                            label="Last Name"
                            value={previewLastName}
                            onchange={handlePreviewLastNameChange}
                            class="slds-m-bottom_x-small">
                        </lightning-input>

                        <!-- Email field removed -->

                        <lightning-input
                            label="Phone"
                            value={previewPhone}
                            onchange={handlePreviewPhoneChange}
                            class="slds-m-bottom_x-small">
                        </lightning-input>

                        <lightning-input
                            label="Location (City, State, Country)"
                            value={previewLocation}
                            onchange={handlePreviewLocationChange}
                            class="slds-m-bottom_x-small">
                        </lightning-input>

                        <lightning-input
                            label="Years of Experience"
                            type="number"
                            value={previewYearsExperience}
                            onchange={handlePreviewYearsExperienceChange}
                            class="slds-m-bottom_x-small">
                        </lightning-input>

                        <lightning-textarea
                            label="Skills (comma-separated)"
                            value={previewSkills}
                            onchange={handlePreviewSkillsChange}>
                        </lightning-textarea>

                    </template>
                </template>

            </div>

            <!-- Footer -->
            <footer class="slds-modal__footer">
                <button
                    class="slds-button slds-button_neutral"
                    onclick={handleCancel}
                    disabled={loading}>
                    Cancel
                </button>

                <button
                    class="slds-button slds-button_brand"
                    onclick={handleOk}
                    disabled={loading}>
                    OK
                </button>
            </footer>

        </div>
    </section>
</template>
