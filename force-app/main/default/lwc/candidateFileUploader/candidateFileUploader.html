<template>
  <lightning-card title="Candidate Documents">
    <div class="slds-p-around_medium">
      <lightning-input type="text" label="Candidate Id" value={candidateId} onchange={handleCandidateChange}></lightning-input>

      <div class="slds-m-top_small">
        <input type="file" multiple accept={acceptTypes} onchange={handleFilesSelected} />
      </div>

      <template if:true={files.length}>
        <div class="slds-m-top_medium">
          <template for:each={files} for:item="f">
            <div key={f.id} class="file-row slds-grid slds-grid_align-spread slds-p-vertical_x-small">
              <div class="slds-col slds-size_1-of-2">
                <strong>{f.name}</strong>
                <div class="meta">{f.humanSize} â€¢ {f.type}</div>
              </div>

              <div class="slds-col slds-size_1-of-2 slds-text-align_right">
                <template if:true={f.uploading}>
                  <div class="progress">
                    <div class="progress-bar" style={f.progressStyle}></div>
                  </div>
                  <div class="status">{f.statusMessage}</div>
                </template>
                <template if:false={f.uploading}>
                  <lightning-button variant="neutral" label="Upload" onclick={startUpload} data-id={f.id}></lightning-button>
                  <lightning-button variant="destructive" label="Remove" onclick={removeFile} data-id={f.id}></lightning-button>
                </template>
              </div>
            </div>
          </template>
        </div>

        <div class="slds-m-top_medium slds-text-align_right">
          <lightning-button variant="brand" label="Start All Uploads" onclick={startAllUploads}></lightning-button>
        </div>
      </template>
    </div>
  </lightning-card>
</template>