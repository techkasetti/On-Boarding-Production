<template>
  <lightning-card title="Chat">
    <div class="slds-p-around_small">

      <template if:false={conversationId}>
        <p>No conversation started yet. Create a candidate first.</p>
      </template>

      <template if:true={conversationId}>
        <div class="slds-m-bottom_small">
          <lightning-button
            label={translatedToggleLabel}
            onclick={toggleTranslated}
            variant="neutral">
          </lightning-button>
        </div>

        <div class="transcript slds-box slds-m-bottom_small" style="min-height:150px; max-height:300px; overflow:auto">
          <template for:each={messages} for:item="m">
            <div key={m.index} class="slds-m-bottom_x-small">
              <strong>{m.author}</strong> ({m.channel}) : {m.text}
            </div>
          </template>
        </div>

        <lightning-textarea 
          label="Message"
          value={draft}
          onchange={onDraftChange}
          placeholder={label.chat_placeholder}>
        </lightning-textarea>

        <div class="slds-m-top_small">
          <lightning-button 
            label="Send (Web)" 
            onclick={handleSendWeb}
            variant="brand"
            class="slds-m-right_small">
          </lightning-button>

          <lightning-button 
            label="Send (Mobile)" 
            onclick={handleSendMobile}
            variant="neutral">
          </lightning-button>
        </div>
      </template>

    </div>
  </lightning-card>
</template>
