<template>
    <div class="slds-box slds-theme_default">
        <h2 class="slds-text-heading_medium slds-m-bottom_medium">Review Candidate Profile</h2>

        <template if:true={loading}>
            <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
        </template>

        <template if:true={error}>
            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" role="alert">
                <span class="slds-assistive-text">Error</span>
                <span class="slds-icon_container slds-icon-utility-error slds-m-right_x-small" title="Error">
                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                        <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#error"></use>
                    </svg>
                </span>
                <h2>{error}</h2>
            </div>
        </template>

        <template if:false={loading}>
            <!-- Personal Information -->
            <h3 class="slds-text-heading_small slds-m-bottom_small">Personal Information</h3>
            <lightning-input label="Full Name" value={fullName} data-id="fullName" onchange={handleInputChange}></lightning-input>
            <lightning-input label="Email" value={email} data-id="email" onchange={handleInputChange} type="email"></lightning-input>
            <lightning-input label="Phone" value={phone} data-id="phone" onchange={handleInputChange} type="tel"></lightning-input>

            <!-- Text Areas for Array Data -->
            <lightning-textarea label="Licenses & Certifications" value={licensesAndCertifications} data-id="licensesAndCertifications" onchange={handleInputChange}></lightning-textarea>
            <lightning-textarea label="Clinical Skills" value={clinicalSkills} data-id="clinicalSkills" onchange={handleInputChange}></lightning-textarea>

            <!-- Work Experience -->
            <h3 class="slds-text-heading_small slds-m-top_large slds-m-bottom_small">Work Experience</h3>
            <lightning-input label="Role" value={workExperience.role} data-id="role" data-section="workExperience" onchange={handleObjectChange}></lightning-input>
            <lightning-input label="Organization" value={workExperience.organization} data-id="organization" data-section="workExperience" onchange={handleObjectChange}></lightning-input>
            <lightning-input label="Duration" value={workExperience.duration} data-id="duration" data-section="workExperience" onchange={handleObjectChange}></lightning-input>
            <lightning-textarea label="Responsibilities" value={workExperience.responsibilities} data-id="responsibilities" data-section="workExperience" onchange={handleObjectChange}></lightning-textarea>
            
            <!-- Other Fields -->
            <lightning-textarea label="Procedures Performed" value={proceduresPerformed} data-id="proceduresPerformed" onchange={handleInputChange}></lightning-textarea>
            <lightning-textarea label="Research & Publications" value={researchAndPublications} data-id="researchAndPublications" onchange={handleInputChange}></lightning-textarea>
            <lightning-textarea label="Technical Skills" value={technicalSkills} data-id="technicalSkills" onchange={handleInputChange}></lightning-textarea>
            <lightning-textarea label="Professional Memberships" value={professionalMemberships} data-id="professionalMemberships" onchange={handleInputChange}></lightning-textarea>

            <!-- Footer Buttons -->
            <div class="slds-m-top_large slds-text-align_right">
                <lightning-button label="Cancel" onclick={handleCancel} class="slds-m-right_x-small"></lightning-button>
                <lightning-button variant="brand" label="Confirm and Save" onclick={handleOk}></lightning-button>
            </div>
        </template>
    </div>
</template>