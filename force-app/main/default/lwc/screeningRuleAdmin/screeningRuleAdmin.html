<template>
  <lightning-card title="Screening Rule Admin">
    <div class="slds-p-around_medium">
      <lightning-input label="Rule Name" value={ruleName} onchange={onNameChange}></lightning-input>
      <lightning-textarea label="Expression" value={expression} onchange={onExpressionChange} placeholder="e.g. payload.amount > 10000 AND payload.country == 'US'"></lightning-textarea>
      <div class="slds-m-top_small slds-grid slds-grid_align-spread">
        <lightning-button variant="brand" label="Save Rule" title="Save" onclick={handleSave}></lightning-button>
        <lightning-button variant="neutral" label="Reset" title="Reset" onclick={handleReset}></lightning-button>
      </div>

      <lightning-input type="checkbox" label="Enabled" checked={enabled} onchange={onEnabledChange} class="slds-m-top_small"></lightning-input>

      <section class="slds-m-top_medium">
        <h3 class="slds-text-heading_small">Preview</h3>
        <lightning-textarea label="Sample payload (JSON)" value={samplePayload} onchange={onSampleChange}></lightning-textarea>
        <div class="slds-m-top_small">
          <lightning-button label="Run Preview" onclick={handlePreview} variant="brand"></lightning-button>
        </div>
        <template if:true={previewResult}>
          <div class="slds-m-top_small slds-box slds-theme_shade">
            <strong>Result:</strong>
            <pre>{previewResult}</pre>
          </div>
        </template>
      </section>

      <template if:true={error}>
        <div class="slds-m-top_small slds-text-color_error">{error}</div>
      </template>
    </div>
  </lightning-card>
</template>
